          opt    nol          lib    environment.h	lib	../include/sysdefs.h          opt    lis          sttl   kernel SWI3 Handler          pag               data          global  swi3han** SWI3 (System call) interrupt handler*  -- Fetch remaining arguments and place in User Block*  -- Call system call handler*  -- Store return parameters on stack*  -- Return to program (via ROM)*swi3han   ldx     usp        get user stack pointer*          leax    10,x       point to user pc	leax	STKREG-2,x  point to user PC          jsr     gtuwrd     get the pc          pshs    d          save it          tfr     d,x        point to pc location          jsr     gtubyt     get post byte          stb     upostb     save in user block          puls    d          get pc back          addd    #1         bump past post byte          std     urglst+UPC save in user block          ldx     usp        get stack pointer*          leax    10,x       point to pc	leax	STKREG-2,x    point to PC          jsr     ptuwrd     set back on stack*          jsr     syscl      process system call*          ldx     usp        point to user stack          ldb     urglst+UCC get CC-codes          jsr     ptubyt     put on stack          leax    1,x        point to d reg          ldd     urglst+UD  get d reg          jsr     ptuwrd     put on stack*          leax    3,x        point to x reg	leax	STKREG-9,x     point to X reg          ldd     urglst+UX  get x reg          jsr     ptuwrd     put on stack          leax    6,x        point to pc          ldd     urglst+UPC get user pc          jsr     ptuwrd     put on stack          rts     return    