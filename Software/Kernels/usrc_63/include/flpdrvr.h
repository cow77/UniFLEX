        pag* BIT defines* IO defines        ifc     &b,'GPPFLP'flpdpr  equ     $0000        else        global  flpdpr,flpintflpdpr  equ     $e000   base address controller 0        endif*flbfhdr equ     0       buffer header locflrwflg equ     2       transaction read/write flag 0=write)flblkh  equ     3       block address highflblkm  equ     4       midflblkl  equ     5       lowfltsiz  equ     6       transaction size (max 512)flstat  equ     8       result statusfldriv  equ     9       which driveflnwop  equ     10      driver new open flagflttyp  equ     11      floppy ttyget/set bytesflpfifo equ     $20     offset to fifo bufferfio2cp  equ     $3fc    debug port data from IO to CPUfcp2io  equ     $3fd    debug port data from CPU to IOflpint  equ     $3fe   IOP tells you it did somethingflptel  equ     $3ff   tell IOP you want somethingFDC     set     2793** data inverse maskEOR4FDC equ     0               00 = 2793, FF is 2791** control latch out*LA_DS0  equ     %00001001       drive select 0LA_SID  equ     %00010000       side selectLA_SDN  equ     %00100000       dens select 0=DD/1=SDLA_8_5  equ     %01000000       8"/5" data rate 0=8"/1=5"LA_HLT  equ     %10000000       toggle head load timer** status buffer*ST_INT  equ     %01000000       interrupt from FDCST_DRQ  equ     %1000000        data request from FDC** FDC Commands*FD_RST  equ     $00             restoreFD_SEK  equ     $10             seekFD_SRD  equ     $84             read sector dataFD_SWR  equ     $A4             write sector dataFD_MRD  equ     $90             read multiple sectorsFD_MWR  equ     $B0             write multiple sectorsFD_RTR  equ     $e0             read trackFD_WTR  equ     $F0             write trackFD_FIN  equ     $D0             force interrupt** FDC status bits*FS_BUSY equ     $01             busy bitFS_DRQ  equ     $02             data request bitFS_TRK0 equ     $04             track zero present [1]FS_LOST equ     $04             lost data          [2]FS_CRC  equ     $08             CRC error detected [2]FS_SKER equ     $10             seek error         [1]FS_RNF  equ     $10             record not found   [2]FS_WRP  equ     $40             write protectFS_NRDY equ     $80             drive not ready** fdc hardware*fdcbas  equ     $8000           FDC controller* subject to EOR4FDCfo2cmd  equ     0               offset to command registerfo2trk  equ     1               offset to track registerfo2sec  equ     2               offset to sector registerfo2dat  equ     3               offset to data register* not subject to EOR4FDCfo4lat  equ     4               drive,side,density latchfo4sta  equ     8               fdc status buffer*fo2trg  equ     12              scope trigger @ this address